

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configurations &mdash; MFF 0.1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Gaussian Processes" href="gp.html" />
    <link rel="prev" title="Models" href="models.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> MFF
          

          
            
            <img src="_static/mff_logo_2.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#usage">Usage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="models.html">Models</a><ul>
<li class="toctree-l2"><a class="reference internal" href="models.html#building-a-model">Building a model</a></li>
<li class="toctree-l2"><a class="reference internal" href="models.html#fitting-the-model">Fitting the model</a></li>
<li class="toctree-l2"><a class="reference internal" href="models.html#predicting-forces-and-energies-with-the-gp">Predicting forces and energies with the GP</a></li>
<li class="toctree-l2"><a class="reference internal" href="models.html#building-a-mapped-potential">Building a mapped potential</a></li>
<li class="toctree-l2"><a class="reference internal" href="models.html#saving-and-loading-a-model">Saving and loading a model</a></li>
<li class="toctree-l2"><a class="reference internal" href="models.html#model-s-complete-reference">Model’s complete reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="models.html#two-body-model">Two Body Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="models.html#three-body-model">Three Body Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="models.html#combined-model">Combined Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="models.html#eam-model">Eam Model</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Configurations</a></li>
<li class="toctree-l1"><a class="reference internal" href="gp.html">Gaussian Processes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="gp.html#two-body-kernel">Two Body Kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="gp.html#three-body-kernel">Three Body Kernel</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="calculators.html">Calculators</a><ul>
<li class="toctree-l2"><a class="reference internal" href="calculators.html#theory-introduction">Theory/Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="calculators.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api.html#the-models-module">The “models” module</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#the-gp-module">The “gp” module</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#the-configurations-module">The “configurations” module</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#the-calculators-module">The “calculators” module</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#the-kernels-module">The “kernels” module</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#the-utility-module">The “utility” module</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MFF</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Configurations</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/confs.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="configurations">
<h1>Configurations<a class="headerlink" href="#configurations" title="Permalink to this headline">¶</a></h1>
<p>The MFF package uses training and testing data extracted from .xyz files. The <code class="docutils literal notranslate"><span class="pre">mff.configurations</span></code> module contains the function <code class="docutils literal notranslate"><span class="pre">carve_confs</span></code> which is used to save .npy files containing local atomic environments, the forces acting on the central atoms of these local atomic environments and, if present, the energy associated with the snapshot the local environment has been extracted from.
To extract local atomic environments, forces, energies and a list of all the elements contained in an ase <code class="docutils literal notranslate"><span class="pre">atoms</span></code> object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ase.io</span> <span class="kn">import</span> <span class="n">read</span>
<span class="kn">from</span> <span class="nn">mff.configurations</span> <span class="kn">import</span> <span class="n">carve_confs</span>
<span class="n">traj</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;extxyz&#39;</span><span class="p">)</span>
<span class="n">elements</span><span class="p">,</span> <span class="n">confs</span><span class="p">,</span> <span class="n">forces</span><span class="p">,</span> <span class="n">energies</span> <span class="o">=</span> <span class="n">carve_confs</span><span class="p">(</span><span class="n">traj</span><span class="p">,</span> <span class="n">r_cut</span><span class="p">,</span> <span class="n">n_data</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">r_cut</span></code> specifies the cutoff radius that will be applied to extract local atomic environments containing all atomis within r_cut from the central one, and n_data specifies the total number of local atomic environments to extract.</p>
<span class="target" id="module-mff.configurations"></span><dl class="exception">
<dt id="mff.configurations.MissingData">
<em class="property">exception </em><code class="sig-prename descclassname">mff.configurations.</code><code class="sig-name descname">MissingData</code><a class="headerlink" href="#mff.configurations.MissingData" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mff.configurations.carve_from_snapshot">
<code class="sig-prename descclassname">mff.configurations.</code><code class="sig-name descname">carve_from_snapshot</code><span class="sig-paren">(</span><em class="sig-param">atoms</em>, <em class="sig-param">r_cut</em>, <em class="sig-param">forces_label=None</em>, <em class="sig-param">energy_label=None</em>, <em class="sig-param">atoms_ind=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mff.configurations.carve_from_snapshot" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract atomic configurations, the forces acting on the central atoms
os said configurations, and the local energy values associated to a single atoms object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>atoms</strong> (<em>ase atoms object</em>) – Ase atoms file, opened with ase.io.read</p></li>
<li><p><strong>atoms_ind</strong> (<em>list</em>) – indexes of the atoms for which a conf is created</p></li>
<li><p><strong>r_cut</strong> (<em>float</em>) – Cutoff to use when carving out atomic environments</p></li>
<li><p><strong>forces_label</strong> (<em>str</em>) – Name of the force label in the trajectory file, if None default is “forces”</p></li>
<li><p><strong>energy_label</strong> (<em>str</em>) – Name of the energy label in the trajectory file, if None default is “energy”</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>List of M by 5 numpy arrays, where M is the number of atoms within</dt><dd><p>r_cut from the central one. The first 3 components are positions w.r.t
the central atom in Angstroms, the fourth is the atomic number of the
central atom, the fifth the atomic number of each atom.</p>
</dd>
</dl>
<p>forces (array): x,y,z components of the force acting on the central atom in eV/Angstrom
energies (array): value of the local atomic energy in eV</p>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>confs (list of arrays)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="mff.configurations.generate">
<code class="sig-prename descclassname">mff.configurations.</code><code class="sig-name descname">generate</code><span class="sig-paren">(</span><em class="sig-param">traj</em>, <em class="sig-param">r_cut</em>, <em class="sig-param">forces_label=None</em>, <em class="sig-param">energy_label=None</em><span class="sig-paren">)</span><a class="headerlink" href="#mff.configurations.generate" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract atomic configurations, the forces acting on the central atoms
os said configurations, and the local energy values associeated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>traj</strong> (<em>ase atoms object</em>) – Ase trajectory file, opened with ase.io.read</p></li>
<li><p><strong>r_cut</strong> (<em>float</em>) – Cutoff to use when carving out atomic environments</p></li>
<li><p><strong>forces_label</strong> (<em>str</em>) – Name of the force label in the trajectory file, if None default is “forces”</p></li>
<li><p><strong>energy_label</strong> (<em>str</em>) – Name of the energy label in the trajectory file, if None default is “energy”</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Structure containing, for each snapshot in the trajectory,</dt><dd><p>the forces, energy, and local atomic configurations for that snapshot’s atoms</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>data (dictionary)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="mff.configurations.generate_and_save">
<code class="sig-prename descclassname">mff.configurations.</code><code class="sig-name descname">generate_and_save</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">r_cut</em>, <em class="sig-param">forces_label=None</em>, <em class="sig-param">energy_label=None</em>, <em class="sig-param">index=':'</em><span class="sig-paren">)</span><a class="headerlink" href="#mff.configurations.generate_and_save" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate the data dictionary and save it to the same location.
:param path: Name and position of trajectory file
:type path: Path or string
:param r_cut: Cutoff used
:type r_cut: float
:param forces_label: Name of the force label in the trajectory file, if None default is “forces”
:type forces_label: str
:param energy_label: Name of the energy label in the trajectory file, if None default is “energy”
:type energy_label: str
:param index: Indexes indicating which snapshots to use from the traj file
:type index: str</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Structure containing, for each snapshot in the trajectory,</dt><dd><p>the forces, energy, and local atomic configurations for that snapshot’s atoms.
Obtained from <code class="docutils literal notranslate"><span class="pre">generate</span></code></p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>data (dict)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="mff.configurations.load">
<code class="sig-prename descclassname">mff.configurations.</code><code class="sig-name descname">load</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">r_cut</em><span class="sig-paren">)</span><a class="headerlink" href="#mff.configurations.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load data saved with <code class="docutils literal notranslate"><span class="pre">save</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>Path</em><em> or </em><em>string</em>) – Name and position of file to load data from</p></li>
<li><p><strong>r_cut</strong> (<em>float</em>) – Cutoff used</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Structure containing, for each snapshot in the trajectory,</dt><dd><p>the forces, energy, and local atomic configurations for that snapshot’s atoms.
Obtained from <code class="docutils literal notranslate"><span class="pre">generate</span></code></p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>data (dict)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="mff.configurations.load_and_unpack">
<code class="sig-prename descclassname">mff.configurations.</code><code class="sig-name descname">load_and_unpack</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">r_cut</em><span class="sig-paren">)</span><a class="headerlink" href="#mff.configurations.load_and_unpack" title="Permalink to this definition">¶</a></dt>
<dd><p>Load data saved with <code class="docutils literal notranslate"><span class="pre">save</span></code> and unpack it with <code class="docutils literal notranslate"><span class="pre">unpak</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>Path</em><em> or </em><em>string</em>) – Name and position of file to load data from</p></li>
<li><p><strong>r_cut</strong> (<em>float</em>) – Cutoff used</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>Atomic numbers of all atomic species present in the dataset
confs (list of arrays): List of M by 5 numpy arrays, where M is the number of atoms within</p>
<blockquote>
<div><p>r_cut from the central one. The first 3 components are positions w.r.t
the central atom in Angstroms, the fourth is the atomic number of the
central atom, the fifth the atomic number of each atom.</p>
</div></blockquote>
<p>forces (array): x,y,z components of the force acting on the central atom in eV/Angstrom
energies (array): value of the total energy in eV
global_confs (list of lists of arrays): list containing lists of configurations, grouped together</p>
<blockquote>
<div><p>so that local atomic environments taken from the same snapshot are in the same group.</p>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>elements (list)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="mff.configurations.save">
<code class="sig-prename descclassname">mff.configurations.</code><code class="sig-name descname">save</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">r_cut</em>, <em class="sig-param">data</em><span class="sig-paren">)</span><a class="headerlink" href="#mff.configurations.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save data extracted with <code class="docutils literal notranslate"><span class="pre">generate</span></code> to a file with a iven cutoff</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>Path</em><em> or </em><em>string</em>) – Name and position of file to save data to</p></li>
<li><p><strong>r_cut</strong> (<em>float</em>) – Cutoff used</p></li>
<li><p><strong>data</strong> (<em>dict</em>) – Structure containing, for each snapshot in the trajectory,
the forces, energy, and local atomic configurations for that snapshot’s atoms.
Obtained from <code class="docutils literal notranslate"><span class="pre">generate</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="mff.configurations.unpack">
<code class="sig-prename descclassname">mff.configurations.</code><code class="sig-name descname">unpack</code><span class="sig-paren">(</span><em class="sig-param">data</em><span class="sig-paren">)</span><a class="headerlink" href="#mff.configurations.unpack" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>From a data dictionary, generate elements, configurations, forces, energies and</dt><dd><p>global configurations to be used by the GP module.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<em>dict</em>) – Structure containing, for each snapshot in the trajectory,
the forces, energy, and local atomic configurations for that snapshot’s atoms.
Obtained from <code class="docutils literal notranslate"><span class="pre">generate</span></code></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>Atomic numbers of all atomic species present in the dataset
confs (list of arrays): List of M by 5 numpy arrays, where M is the number of atoms within</p>
<blockquote>
<div><p>r_cut from the central one. The first 3 components are positions w.r.t
the central atom in Angstroms, the fourth is the atomic number of the
central atom, the fifth the atomic number of each atom.</p>
</div></blockquote>
<p>forces (array): x,y,z components of the force acting on the central atom in eV/Angstrom
energies (array): value of the total energy in eV
global_confs (list of lists of arrays): list containing lists of configurations, grouped together</p>
<blockquote>
<div><p>so that local atomic environments taken from the same snapshot are in the same group.</p>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>elements (list)</p>
</dd>
</dl>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="gp.html" class="btn btn-neutral float-right" title="Gaussian Processes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="models.html" class="btn btn-neutral float-left" title="Models" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>